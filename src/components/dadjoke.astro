---
import axios from "axios";

const { class: className, ...rest } = Astro.props;

let joke = null;

try {
  const response = await axios.get(
    "https://dadjokes.developersandbox.xyz/api/v1/random",
  );
  joke = response.data;
} catch (error) {
  return null;
}
---

<section class={className} {...rest}>
  <h3 class="underline pb-2">Dad Joke</h3>
  <ul>
    {joke ? <li>{joke.joke_text}</li> : <li>ERROR FETCHING DAD JOKE!</li>}
  </ul>
</section>
